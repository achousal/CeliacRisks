# Panel Optimization Configuration
#
# Aggregated RFE to find optimal panel size trade-offs for clinical deployment.
# CLI args always override config values.
#
# USAGE:
#
# Recommended workflow (with run-id - auto-detects paths):
#   ced optimize-panel --config configs/optimize_panel.yaml
#   ced optimize-panel --config configs/optimize_panel.yaml --run-id 20260128_120000  # Override run-id
#   ced optimize-panel --config configs/optimize_panel.yaml --model LR_EN            # Filter single model
#
# Alternative workflow (explicit paths):
#   ced optimize-panel --config configs/optimize_panel.yaml --results-dir ../results/LR_EN/run_X
#
# Without config file:
#   ced optimize-panel --run-id 20260127_104409  # Auto-detects infile and split-dir
#
# Reference: docs/reference/FEATURE_SELECTION.md#aggregated-rfe-deployment-optimization

# ==============================================================================
# Model Selection (choose ONE - REQUIRED)
# ==============================================================================

# Option A: Batch optimize all models with a run-id (RECOMMENDED)
# When using run-id, infile and split-dir are auto-detected from run metadata.
# You can optionally filter to a specific model.
run_id: 20260127_104409
# model: LR_EN  # Optional: filter to single model (omit to process all models)

# Option B: Single model by explicit results directory path
# When using results-dir, you MUST also specify infile and split-dir below.
# results_dir: ../results/LR_EN/run_20260127_104409

# ==============================================================================
# Data Paths (OPTIONAL with run-id, REQUIRED with results-dir)
# ==============================================================================

# Auto-detected from run metadata when using run-id.
# Specify here as fallback if metadata is missing, or when using results-dir.
# infile: ../data/Celiac_dataset_proteomics_w_demo.parquet
# split_dir: ../splits

# ==============================================================================
# RFE Algorithm Parameters
# ==============================================================================

stability_threshold: 0.75    # Minimum selection fraction for stable proteins (default: 0.75)
min_size: 5                  # Minimum panel size to evaluate (default: 5)
min_auroc_frac: 0.5         # Early stop if AUROC < this fraction of max (default: 0.90)
cv_folds: 5                  # CV folds for OOF AUROC estimation (default: 5)
step_strategy: fine          # Feature elimination: geometric, linear, fine (default: geometric)

# ==============================================================================
# Output Settings
# ==============================================================================

# outdir: ../results/custom_output  # Default: {results_dir}/aggregated/optimize_panel/
verbose: 2                           # Verbosity: 0=warnings, 1=info, 2=debug (default: 0)
